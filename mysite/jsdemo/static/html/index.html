<!DOCTYPE html>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<html>
	<head>
		<script type="text/javascript" src="../js/jsmodual/jquery/jquery-2.0.3.min.js"></script>
		<script type="text/javascript" src="../js/jsmodual/raphael/raphael.js"></script>
		<script type="text/javascript">
			$(function(){
					//页面对象
					var $main = $("#main");//主容器
					//生成图片
					var imagenames = ["1","2","3","4"];
					//图片对象
					for(var idx in imagenames){
					var $imagediv = $("<div class='imagecontent' style='float:left;'></div>");
					var $image = $("<image></image>")
					.attr("src","../images/person/"+imagenames[idx]+".jpg")
					.appendTo($imagediv);
					//隐藏非第一个
					if(idx != 0) $($imagediv).hide();
					$($main).append($imagediv);
					}

					//生成页面切换按钮
					var $preimage = $("<div></div>").html("上一张")
					.attr("style","width:30px;height:200px;background-color:red;float:left;")
					.prependTo($main);//上一张
					var $nextimage = $("<div></div>").html("下一张")
						.attr("style","width:30px;height:200px;background-color:red;float:left;")
						.appendTo($main);//下一张

					//生成底部图片序列标识
					var $footidx = $("<div style='float:left;clear:left;' id='footidx'></div>");
					for(var i = 0 ; i < imagenames.length ; i++){
						var $onefootidx = $("<div style='float:left;width:30px;width:30px;text-align:center;'>"
								+(i+1)+"</div>").css("cursor","pointer");
						if(i == 0){
							$($onefootidx).css("color","red");
						}
						$($footidx).append($onefootidx);
					}
					$($main).append($footidx);

					//获取当前容器对象
					function getCurImageCon(){
						return $($main).find('.imagecontent:visible');
					}
					//获取第一个容器
					function getFirstImageCon(){
						return $($main).find('.imagecontent:first');
					}
					//获取最后一个个容器
					function getLastImageCon(){
						return $($main).find('.imagecontent:last');
					}

					//点击切换下一张事件
					$($nextimage).click(function(){
							var curImageCon = getCurImageCon();
							$(curImageCon).fadeOut(function(){
								if($(curImageCon).next().is(".imagecontent")){
								$(curImageCon).next().fadeIn();
								}else{
								getFirstImageCon().fadeIn();
								}
								});
							//更改图片序号颜色
							$($footidx).find('div').css("color","black");
							$($footidx).find('div').eq($(curImageCon).index($(".imagecontent")) + 1).css("color","red");
							});
					//点击切换上一张事件
					$($preimage).click(function(){
							var curImageCon = getCurImageCon();
							$(curImageCon).fadeOut(function(){
								if($(curImageCon).prev().is(".imagecontent")){
								$(curImageCon).prev().fadeIn();
								}else{
								getLastImageCon().fadeIn();
								}
								});
							});

			});
		</script>
	</head>
	<body>
		<div id="main"></div>
	</body>
</html>
